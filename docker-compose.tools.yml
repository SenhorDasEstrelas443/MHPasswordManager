version: '3.8'
services:
  postgres-db:
    image: mhpasswordmanager/postgres:dev
    container_name: 'postgres-db'
    restart: on-failure
    env_file:
      - docker-envs/POSTGRES-DB.env
    networks:
      - net-mhpasswordmanager
    ports:
      - "5432:5432"
    volumes:
      - data-mhpasswordmanager-postgres-db:/var/lib/postgresql/data
  redis-store:
    image: mhpasswordmanager/redis:dev
    container_name: 'redis-cache'
    env_file:
      - docker-envs/REDIS-STORE.env
    restart: on-failure
    ports:
      - '6379:6379'
    volumes:
      - data-mhpasswordmanager-redis:/data
    networks:
      - net-mhpasswordmanager
  mongo-db:
    image: mhpasswordmanager/mongo:dev
    container_name: 'mongo-db'
    restart: on-failure
    env_file:
      - docker/configs-local/MONGO-DB.env
    networks:
      - net-mhpasswordmanager
    volumes:
      - data-mhpasswordmanager-mongo-db:/data/db
    ports:
      - "27017:27017"
  rabbitmq:
    image: mhpasswordmanager/rabbit:dev
    container_name: 'rabbit-broker'
    env_file:
      - docker-envs/RABBITMQ.env
    networks:
      - net-mhpasswordmanager
    volumes:
      - data-mhpasswordmanager-rabbitmq-logs:/var/lib/rabbitmq
      - data-mhpasswordmanager-rabbitmq-logs:/var/log/rabbitmq
    ports:
      - "5672:5672"
      - "15672:15672"
      - "25672:25672"
      - "15692:15692"
networks:
  net-mhpasswordmanager:
    driver: bridge
volumes:
  data-mhpasswordmanager-postgres-db:
  data-mhpasswordmanager-redis:
  data-mhpasswordmanager-mongo-db:
  data-mhpasswordmanager-rabbitmq-logs:
  data-mhpasswordmanager-rabbitmq-data:
